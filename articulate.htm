<!DOCTYPE html>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="viewport-fit=cover, user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"><html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
<script src="objects.js"></script>
<link rel="apple-touch-icon" href="./apple-touch-icon.png">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<head>

    <script type="text/javascript">

        var current_word_list = [];

        $(document).ready(function () {
          $(".btn").click(function(event) {
            // Removes focus of the button.
            $(this).blur();
          });
        });

        function next_word()
        {
            $('#word').html(current_word_list[Math.floor(Math.random() * current_word_list.length)])
        }

        function play_turn(word_list) 
        {
            current_word_list = word_list;

            $('#category-select').addClass("collapse");
            $('#play-turn').removeClass("collapse");

            var timerId, percent;

            // reset progress bar
            percent = 100;
            $('#timer').css('width', '100%');
            $('#timer').addClass('progress-bar-striped active bg-success');
            $('#timer').html('');

            $('#word').html(word_list[Math.floor(Math.random() * word_list.length)])

            timerId = setInterval(function() {

                // increment progress bar
                percent -= 1;
                $('#timer').css('width', percent + '%');
                // $('#timer').html(percent);

                if (percent <= 20) {
                    $('#timer').removeClass('bg-success');
                    $('#timer').addClass('bg-warning');
                }

                if (percent <= 0) {
                    clearInterval(timerId);
                    $('#timer').removeClass('progress-bar-striped active bg-warning');
                    $('#timer').addClass('progress-bar bg-danger');
                    $('#timer').css('width', '100%');
                    // $('#timer').html('Time up!');
                }

            }, 450);

        }

    </script>


    <style media="all">
        #success {color: green;}
        #failure {color: red;}
        
        #main_row {
            min-height: 100vh;
        }

        #body {height: 90%;}

        #progress {
            height: 5%;
        }


        .progress-bar {height: 80%}

        .flex-fill {
            flex:1 1 auto;
        }

        .btn {
            width: 80%;
            height: 30%;
            margin: 10%;
        }

        #play-turn {
            width: 100%;
        }

        .row {
            margin: 0;
        }

        #category-select {
            height: 30%;
        }

    </style> 
    <meta charset="utf-8" />
    <title></title>
</head>

<body class="bg-dark">
<div class="container-fluid bg-dark">
    <div class="row bg-dark" id="main_row">
        <div id="play-turn" class="row collapse">
            <div id="body" class="row">
                <div class="col-sm-9 col-12 text-center text-white d-flex flex-column">
                        <div class="row my-auto">
                            <h1 id="word" class="my-auto">Word to describe</h1>
                        </div>
                </div>
                <div id="actions" class="col-sm-3 col-12 text-center d-flex flex-column">            
                    <div class="row h-50">
                        <h4 id="success" class="my-auto">
                            <button type="button" class="btn btn-success" onclick="next_word();">Success</button>
                        </h4>
                    </div>
                    <div class="row h-50">
                        <h4 id="pass" class="my-auto">
                            <button type="button" class="btn btn-danger" onclick="next_word();">Pass</button>
                        </h4>
                    </div>
                </div>
            </div>
            <div id="footer" class="row progress bg-dark flex-grow-1">
                <div id="timer" class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 100%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

        </div>
        <div id="category-select" class="row my-auto">
            <div class="row">
                <div class="col-12 col-sm-4 my-auto text-center">
                    <a href="#" role="button" class="btn btn-primary" onclick="play_turn(words.objects);">Object</a>
                </div>
                <div class="col-12 col-sm-4 my-auto text-center">
                    <button type="button" class="btn btn-secondary">Action</button>
                </div>
                <div class="col-12 col-sm-4 my-auto text-center">
                    <button type="button" class="btn btn-success">Nature</button>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-sm-4 my-auto text-center">
                    <button type="button" class="btn btn-danger">Person</button>
                </div>
                <div class="col-12 col-sm-4 my-auto text-center">
                    <button type="button" class="btn btn-warning">World</button>
                </div>
                <div class="col-12 col-sm-4 my-auto text-center">
                    <button type="button" class="btn btn-info">Random</button>
                </div>
            </div>
        </div>              
    </div>    
</div>

</body>
</html>